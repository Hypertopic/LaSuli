{"version":3,"sources":["webpack:///webpack/bootstrap ab8a449eff08a39d8d23","webpack:///./src/backgroundScripts/background.js"],"names":["currentTabId","currentUrl","errorHandler","error","console","browser","windows","getCurrent","populate","then","windowInfo","tabs","forEach","tab","active","id","url","undefined","reload","e","browserAction","setBadgeText","text","updateHighlightNumber","answer","sendMessage","aim","data","returnMessage","handleUpdate","tabId","changeInfo","tabInfo","executeScript","file","handleTabChange","activeInfo","get","handleTabCreation","handleExtensionButtonClick","onUpdated","addListener","onActivated","onCreated","onClicked"],"mappings":"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","file":"background.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 33);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ab8a449eff08a39d8d23","//Launching Webext\nlet currentTabId,\n\tcurrentUrl;\n\nconst errorHandler = function (error){ error => console.error(error)};\n\ntry{\n\tbrowser.windows.getCurrent({populate: true})\n\t.then(windowInfo => {\n\t\twindowInfo.tabs.forEach(tab => {\n\t\t\tif (tab.active) {\n\t\t\t\tcurrentTabId = tab.id;\n\t\t\t\tcurrentUrl = tab.url;\n\t\t\t\tif (currentUrl == undefined) {\n\t\t\t\t\tbrowser.tabs.reload(tab.id);\n\t\t\t\t\tcurrentUrl = tab.url;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n}catch(e){errorHandler}\n\nbrowser.browserAction.setBadgeText({text: `...`});\n\nconst updateHighlightNumber = async () => {\n\ttry {\n\t\tconst answer = await browser.tabs.sendMessage(currentTabId, {aim: `getAllHighlights`, data: currentUrl})\n\t\tbrowser.browserAction.setBadgeText({text: answer.returnMessage});\n\t} catch(e){\n\t\tbrowser.browserAction.setBadgeText({text: `err`});\n\t};\n}\n\nconst handleUpdate = async (tabId, changeInfo, tabInfo) => {\n\tif (changeInfo.url) {\n\t\tcurrentUrl = changeInfo.url;\n\t\tcurrentTabId = tabId;\n\t\tbrowser.browserAction.setBadgeText({text: `...`});\n\t\tawait browser.tabs.executeScript(currentTabId, {file: \"/dist/content.js\"});\n\t\tawait updateHighlightNumber();\n\t}\n}\n\nconst handleTabChange = async (activeInfo) => {\n\tcurrentTabId = activeInfo.tabId;\n\ttry{\n\t\ttab = await browser.tabs.get(activeInfo.tabId);\n\t\tcurrentUrl = tab.url;\n\t\tbrowser.browserAction.setBadgeText({text: `...`});\n\t}catch(e){errorHandler}\n}\n\nconst handleTabCreation = async (tab) => {\n\tcurrentTabId = tab.id;\n\ttry{\n\t\tbrowser.browserAction.setBadgeText({text: `...`});\n\t}catch(e){errorHandler}\n}\n\nconst handleExtensionButtonClick = async (tab) => {\n\ttry {\n\t\tlet answer = await browser.tabs.sendMessage(currentTabId, {aim:`showHighlights`, data: currentUrl});\n\t}catch(e){errorHandler}\n}\n\nbrowser.tabs.onUpdated.addListener(handleUpdate);\nbrowser.tabs.onActivated.addListener(handleTabChange);\nbrowser.tabs.onCreated.addListener(handleTabCreation);\nbrowser.browserAction.onClicked.addListener(handleExtensionButtonClick);\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/backgroundScripts/background.js"],"sourceRoot":""}